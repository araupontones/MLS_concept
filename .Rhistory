geom_tile(color = "white") +
scale_fill_manual(breaks = c("1AB_2016",
"1C_2018",
"2A_2018",
"2B_2019"),
values = c("#23747C", "#8EAAB0", "#3AB76C", "#A5D6B0"),
name = "") +
scale_y_discrete(expand = c(0,0)) +
scale_x_discrete(position = "top",
expand = c(0,0))+
labs(x = "Sub-round",
y = "Dataset",
title = "There are a total of 662 databases (*.dta) saved in the 01_Firm directory.",
subtitle = "Only in the round 2B_2019, there are 394 datasets. And not all the folders exist for all\nthe sub-rounds.",
caption = "Analysis of the data management system for the MLSS online dashboard | Nov 2021 ") +
theme_MLS() +
theme(axis.text.x = element_blank(),
panel.grid = element_blank(),
plot.background = element_rect(fill = "white"),
legend.position = c(0,1)
)
#plot ---------------------------------------------------------------------------
d_p |>
ggplot(aes(
x = round,
y = name,
fill = round
)
) +
geom_tile(color = "white") +
scale_fill_manual(breaks = c("1AB_2016",
"1C_2018",
"2A_2018",
"2B_2019"),
values = c("#23747C", "#8EAAB0", "#3AB76C", "#A5D6B0"),
name = "") +
scale_y_discrete(expand = c(0,0)) +
scale_x_discrete(position = "top",
expand = c(0,0))+
labs(x = "Sub-round",
y = "Dataset",
title = "There are a total of 662 databases (*.dta) saved in the 01_Firm directory.",
subtitle = "Only in the round 2B_2019, there are 394 datasets. And not all the folders exist for all\nthe sub-rounds.",
caption = "Analysis of the data management system for the MLSS online dashboard | Nov 2021 ") +
theme_MLS() +
theme(axis.text.x = element_blank(),
panel.grid = element_blank(),
plot.background = element_rect(fill = "white"),
legend.position = c(0,1),
legend.direction = "horizontal"
)
#plot ---------------------------------------------------------------------------
d_p |>
ggplot(aes(
x = round,
y = name,
fill = round
)
) +
geom_tile(color = "white") +
scale_fill_manual(breaks = c("1AB_2016",
"1C_2018",
"2A_2018",
"2B_2019"),
values = c("#23747C", "#8EAAB0", "#3AB76C", "#A5D6B0"),
name = "") +
scale_y_discrete(expand = c(0,0)) +
scale_x_discrete(position = "top",
expand = c(0,0))+
labs(x = "Sub-round",
y = "Dataset",
title = "There are a total of 662 databases (*.dta) saved in the 01_Firm directory.",
subtitle = "Only in the round 2B_2019, there are 394 datasets. And not all the folders exist for all\nthe sub-rounds.",
caption = "Analysis of the data management system for the MLSS online dashboard | Nov 2021 ") +
theme_MLS() +
theme(axis.text.x = element_blank(),
panel.grid = element_blank(),
plot.background = element_rect(fill = "white"),
legend.position = c(0,1.2),
legend.direction = "horizontal"
)
#plot ---------------------------------------------------------------------------
d_p |>
ggplot(aes(
x = round,
y = name,
fill = round
)
) +
geom_tile(color = "white") +
scale_fill_manual(breaks = c("1AB_2016",
"1C_2018",
"2A_2018",
"2B_2019"),
values = c("#23747C", "#8EAAB0", "#3AB76C", "#A5D6B0"),
name = "") +
scale_y_discrete(expand = c(0,0)) +
scale_x_discrete(position = "top",
expand = c(0,0))+
labs(x = "Sub-round",
y = "Dataset",
title = "There are a total of 662 databases (*.dta) saved in the 01_Firm directory.",
subtitle = "Only in the round 2B_2019, there are 394 datasets. And not all the folders exist for all\nthe sub-rounds.",
caption = "Analysis of the data management system for the MLSS online dashboard | Nov 2021 ") +
theme_MLS() +
theme(axis.text.x = element_blank(),
panel.grid = element_blank(),
plot.background = element_rect(fill = "white"),
legend.position = c(0,1),
legend.direction = "horizontal"
)
#plot ---------------------------------------------------------------------------
d_p |>
ggplot(aes(
x = round,
y = name,
fill = round
)
) +
geom_tile(color = "white") +
scale_fill_manual(breaks = c("1AB_2016",
"1C_2018",
"2A_2018",
"2B_2019"),
values = c("#23747C", "#8EAAB0", "#3AB76C", "#A5D6B0"),
name = "") +
scale_y_discrete(expand = c(0,0)) +
scale_x_discrete(position = "top",
expand = c(0,0))+
labs(x = "Sub-round",
y = "Dataset",
title = "There are a total of 662 databases (*.dta) saved in the 01_Firm directory.",
subtitle = "Only in the round 2B_2019, there are 394 datasets. And not all the folders exist for all\nthe sub-rounds.",
caption = "Analysis of the data management system for the MLSS online dashboard | Nov 2021 ") +
theme_MLS() +
theme(axis.text.x = element_blank(),
panel.grid = element_blank(),
plot.background = element_rect(fill = "white"),
legend.position = c(0,1),
legend.direction = "horizontal",
legend.title = element_blank()
)
#plot ---------------------------------------------------------------------------
d_p |>
ggplot(aes(
x = round,
y = name,
fill = round
)
) +
geom_tile(color = "white") +
scale_fill_manual(breaks = c("1AB_2016",
"1C_2018",
"2A_2018",
"2B_2019"),
values = c("#23747C", "#8EAAB0", "#3AB76C", "#A5D6B0"),
name = "") +
scale_y_discrete(expand = c(0,0)) +
scale_x_discrete(position = "top",
expand = c(0,0))+
labs(x = "",
y = "Dataset",
title = "There are a total of 662 databases (*.dta) saved in the 01_Firm directory.",
subtitle = "Only in the round 2B_2019, there are 394 datasets. And not all the folders exist for all\nthe sub-rounds.",
caption = "Analysis of the data management system for the MLSS online dashboard | Nov 2021 ") +
theme_MLS() +
theme(axis.text.x = element_blank(),
panel.grid = element_blank(),
plot.background = element_rect(fill = "white"),
legend.position = c(0,1),
legend.direction = "horizontal",
legend.title = element_blank()
)
exfile
ggsave(exfile,
last_plot(),
height = 60,
units = 'cm')
ggsave(exfile,
last_plot(),
height = 80,
units = 'cm')
ggsave(exfile,
last_plot(),
height = 80,
width = 25,
units = 'cm')
#plot ---------------------------------------------------------------------------
d_p |>
ggplot(aes(
x = round,
y = name,
fill = round
)
) +
geom_tile(color = "white") +
scale_fill_manual(breaks = c("1AB_2016",
"1C_2018",
"2A_2018",
"2B_2019"),
values = c("#23747C", "#8EAAB0", "#3AB76C", "#A5D6B0"),
name = "") +
scale_y_discrete(expand = c(0,0)) +
scale_x_discrete(position = "top",
expand = c(0,0))+
labs(x = "",
y = "Dataset",
title = "There are a total of 662 databases (*.dta) saved in the 01_Firm directory.",
subtitle = "Only in the round 2B_2019, there are 394 datasets. And not all the folders exist for all\nthe sub-rounds.",
caption = "Analysis of the data management system for the MLSS online dashboard | Nov 2021 ") +
theme_MLS() +
theme(axis.text.x = element_blank(),
panel.grid = element_blank(),
plot.background = element_rect(fill = "white"),
legend.position = c(.2,1),
legend.direction = "horizontal",
legend.title = element_blank()
)
#plot ---------------------------------------------------------------------------
d_p |>
ggplot(aes(
x = round,
y = name,
fill = round
)
) +
geom_tile(color = "white") +
scale_fill_manual(breaks = c("1AB_2016",
"1C_2018",
"2A_2018",
"2B_2019"),
values = c("#23747C", "#8EAAB0", "#3AB76C", "#A5D6B0"),
name = "") +
scale_y_discrete(expand = c(0,0)) +
scale_x_discrete(position = "top",
expand = c(0,0))+
labs(x = "",
y = "Dataset",
title = "There are a total of 662 databases (*.dta) saved in the 01_Firm directory.",
subtitle = "Only in the round 2B_2019, there are 394 datasets. And not all the folders exist for all\nthe sub-rounds.",
caption = "Analysis of the data management system for the MLSS online dashboard | Nov 2021 ") +
theme_MLS() +
theme(axis.text.x = element_blank(),
panel.grid = element_blank(),
plot.background = element_rect(fill = "white"),
legend.position = c(.2,1),
legend.direction = "horizontal",
legend.title = element_blank(),
legend.text = element_text(size = 18)
)
exfile
ggsave(exfile,
last_plot(),
height = 80,
width = 25,
units = 'cm')
#plot ---------------------------------------------------------------------------
d_p |>
ggplot(aes(
x = round,
y = name,
fill = round
)
) +
geom_tile(color = "white") +
scale_fill_manual(breaks = c("1AB_2016",
"1C_2018",
"2A_2018",
"2B_2019"),
values = c("#23747C", "#8EAAB0", "#3AB76C", "#A5D6B0"),
name = "") +
scale_y_discrete(expand = c(0,0)) +
scale_x_discrete(position = "top",
expand = c(0,0))+
labs(x = "",
y = "Dataset",
title = "There are a total of 662 databases (*.dta) saved in the 01_Firm directory.",
subtitle = "Only in the round 2B_2019, there are 394 datasets. And not all the folders exist for all\nthe sub-rounds.",
caption = "Analysis of the data management system for the MLSS online dashboard | Nov 2021 ") +
theme_MLS() +
theme(axis.text.x = element_blank(),
panel.grid = element_blank(),
plot.background = element_rect(fill = "white"),
legend.position = c(.2,1),
legend.direction = "horizontal",
legend.title = element_blank(),
legend.text = element_text(size = 22)
)
exfile
ggsave(exfile,
last_plot(),
height = 80,
width = 25,
units = 'cm')
#plot ---------------------------------------------------------------------------
d_p |>
ggplot(aes(
x = round,
y = name,
fill = round
)
) +
geom_tile(color = "white") +
scale_fill_manual(breaks = c("1AB_2016",
"1C_2018",
"2A_2018",
"2B_2019"),
values = c("#23747C", "#8EAAB0", "#3AB76C", "#A5D6B0"),
name = "") +
scale_y_discrete(expand = c(0,0)) +
scale_x_discrete(position = "top",
expand = c(0,0))+
labs(x = "",
y = "Dataset",
title = "Consistency across rounds.",
#subtitle = "Only in the round 2B_2019, there are 394 datasets. And not all the folders exist for all\nthe sub-rounds.",
#caption = "Analysis of the data management system for the MLSS online dashboard | Nov 2021 "
) +
theme_MLS() +
theme(axis.text.x = element_blank(),
panel.grid = element_blank(),
plot.background = element_rect(fill = "white"),
legend.position = c(.2,1),
legend.direction = "horizontal",
legend.title = element_blank(),
legend.text = element_text(size = 22),
plot.title = element_text(size = 40)
)
exfile
ggsave(exfile,
last_plot(),
height = 80,
width = 25,
units = 'cm')
#plot ---------------------------------------------------------------------------
d_p |>
ggplot(aes(
x = round,
y = name,
fill = round
)
) +
geom_tile(color = "white") +
scale_fill_manual(breaks = c("1AB_2016",
"1C_2018",
"2A_2018",
"2B_2019"),
values = c("#23747C", "#8EAAB0", "#3AB76C", "#A5D6B0"),
name = "") +
scale_y_discrete(expand = c(0,0)) +
scale_x_discrete(position = "top",
expand = c(0,0))+
labs(x = "",
y = "Dataset",
title = "Consistency of datasets across rounds.",
#subtitle = "Only in the round 2B_2019, there are 394 datasets. And not all the folders exist for all\nthe sub-rounds.",
#caption = "Analysis of the data management system for the MLSS online dashboard | Nov 2021 "
) +
theme_MLS() +
theme(axis.text.x = element_blank(),
panel.grid = element_blank(),
plot.background = element_rect(fill = "white"),
legend.position = c(.2,1),
legend.direction = "horizontal",
legend.title = element_blank(),
legend.text = element_text(size = 22),
plot.title = element_text(size = 40)
)
exfile
ggsave(exfile,
last_plot(),
height = 80,
width = 25,
units = 'cm')
ggsave(exfile,
last_plot(),
height = 80,
width = 30,
units = 'cm')
#plot ---------------------------------------------------------------------------
d_p |>
ggplot(aes(
x = round,
y = name,
fill = round
)
) +
geom_tile(color = "white") +
scale_fill_manual(breaks = c("1AB_2016",
"1C_2018",
"2A_2018",
"2B_2019"),
values = c("#23747C", "#8EAAB0", "#3AB76C", "#A5D6B0"),
name = "") +
scale_y_discrete(expand = c(0,0)) +
scale_x_discrete(position = "top",
expand = c(0,0))+
labs(x = "",
y = "Dataset",
title = "Consistency of datasets across rounds.",
#subtitle = "Only in the round 2B_2019, there are 394 datasets. And not all the folders exist for all\nthe sub-rounds.",
#caption = "Analysis of the data management system for the MLSS online dashboard | Nov 2021 "
) +
theme_MLS() +
theme(axis.text.x = element_blank(),
panel.grid = element_blank(),
plot.background = element_rect(fill = "white"),
legend.position = c(.4,1),
legend.direction = "horizontal",
legend.title = element_blank(),
legend.text = element_text(size = 22),
plot.title = element_text(size = 40)
)
exfile
ggsave(exfile,
last_plot(),
height = 80,
width = 30,
units = 'cm')
#plot ---------------------------------------------------------------------------
d_p |>
ggplot(aes(
x = round,
y = name,
fill = round
)
) +
geom_tile(color = "white") +
scale_fill_manual(breaks = c("1AB_2016",
"1C_2018",
"2A_2018",
"2B_2019"),
values = c("#23747C", "#8EAAB0", "#3AB76C", "#A5D6B0"),
name = "") +
scale_y_discrete(expand = c(0,0)) +
scale_x_discrete(position = "top",
expand = c(0,0))+
labs(x = "",
y = "Dataset",
title = "Consistency of datasets across rounds.",
#subtitle = "Only in the round 2B_2019, there are 394 datasets. And not all the folders exist for all\nthe sub-rounds.",
#caption = "Analysis of the data management system for the MLSS online dashboard | Nov 2021 "
) +
theme_MLS() +
theme(axis.text.x = element_blank(),
panel.grid = element_blank(),
plot.background = element_rect(fill = "white"),
legend.position = c(.3,1),
legend.direction = "horizontal",
legend.title = element_blank(),
legend.text = element_text(size = 22),
plot.title = element_text(size = 40)
)
ggsave(exfile,
last_plot(),
height = 80,
width = 30,
units = 'cm')
dr <- rio::import(infile) |>
mutate(inBoth1 = in1AB_2016 & in1C_2018,
inBoth2 = in2A_2018 & in2B_2019)
dr1 <- filter(in1AB_2016 |in1C_2018 )
dr <- rio::import(infile) |>
mutate(inBoth1 = in1AB_2016 & in1C_2018,
inBoth2 = in2A_2018 & in2B_2019)
dr1 <- dr |>filter(in1AB_2016 |in1C_2018 )
dr1 |> tabyl(in1AB_2016)
nrow(dr1)
mean(dr1$inBoth1)
inBoth1 <- sum(dr1$inBoth1)
inBoth1
inBoth1_perc <-mean(dr1$inBoth1)
inBoth1_perc
inBoth1_perc <-round(mean(dr1$inBoth1),1) *100
inBoth1_perc
inBoth1_perc <-round(mean(dr1$inBoth1),2) *100
inBoth1_perc
inBoth1_perc <-round(mean(dr1$inBoth1),3) *100
inBoth1_perc
inBoth1_perc <-paste0(round(mean(dr1$inBoth1),3) *100, "%")
inBoth1_perc
dr2 <- dr |>filter(in2A_2018 |in2B_2019 )
dr2 <- dr |>filter(in2A_2018 |in2B_2019 )
filesRound2 <- nrow(dr2) #total files in both rounds
inBoth2 <- sum(dr2$inBoth2)
inBoth2_perc <-paste0(round(mean(dr2$inBoth2),3) *100, "%")
filesRound2
inBoth2
derived_dir <-"C:/Users/andre/Dropbox/MESIP_New_Internal RG/05_Data/01_Baseline/05_Derived"
exdir <- "report/tables"
exfile_s <- file.path(exdir, "varNamesSchool.rds")
exfile_p <- file.path(exdir, "varNamesPupils.rds")
exfile_t <- file.path(exdir, "varNamesTeachers.rds")
s <- rio::import(file.path(derived_dir, "school_level_indicators_final.dta" ))
p <- rio::import(file.path(derived_dir, "student_level_indicators_final.dta" ))
t <- rio::import(file.path(derived_dir, "teacher_level_indicators_final.dta" ))
#create tables with names
school_derived <- create_data_info(s)
pupil_derived <- create_data_info(p)
teacher_derived <- create_data_info(t)
nrow(school_derived)
ncol(school_derived)
nrow(s)
ncol(s)
nrow(p)
ncol(p)
nrow(t)
ncol(t)
View(school_derived)
export(school_derived, exfile_s)
export(pupil_derived, exfile_p)
export(teacher_derived, exfile_t)
